
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Day Planner</title>
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='img/favicon.png') }}">
  <script src="https://unpkg.com/htmx.org@2.0.3"></script>
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.2/Sortable.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    /* Compact, minimal, Swiss-inspired admin look with light/dark themes */
    :root {
      --bs-body-font-size: 0.92rem;
      --bs-body-bg: #f8f9fb;
      --bs-body-color: #2c2c2c;
      --bs-border-color: #e9ecef;
      --dp-muted: #6c757d;
      --dp-time-color: #555;
      --dp-card-bg: #ffffff;
      --dp-slot-empty-bg: #fcfcfd;
      --dp-slot-filled-bg: #f6fff6;
      --dp-slot-filled-border: #d7f0d7;
      --dp-focus: #86b7fe;
    }
    .theme-dark {
      --bs-body-bg: #0f141a;           /* deep blue-grey */
      --bs-body-color: #e6e9ee;        /* light grey-blue text */
      --bs-border-color: #273240;      /* slate border */
      --dp-muted: #9aa4b2;             /* muted grey-blue */
      --dp-time-color: #a8b3bf;
      --dp-card-bg: #121923;           /* card background */
      --dp-slot-empty-bg: #121923;     /* empty slot */
      --dp-slot-filled-bg: #0f1f17;    /* subtle dark green tint */
      --dp-slot-filled-border: #1d3a2c;/* greenish border */
      --dp-focus: #5aa2ff;             /* accessible focus */
    }

    body { background: var(--bs-body-bg); color: var(--bs-body-color); }

    /* Container spacing */
    .dp-container { max-width: 1080px; margin: 0 auto; padding: 16px 16px 24px; }

    /* Header */
    .dp-header { display:grid; grid-template-columns: 1fr auto; gap: 12px; align-items: center; margin-bottom: 12px; }
    .dp-brand { font-weight: 700; font-size: 1rem; letter-spacing: .2px; color: inherit; }
    .dp-nav a { padding: .125rem .5rem; font-size: .8rem; }

    /* Two columns */
    .dp-cols { display:grid; grid-template-columns: 1fr 1fr; gap: 12px; align-items:start; }
    @media (max-width: 900px){ .dp-cols { grid-template-columns: 1fr; } }

    /* Blocks grid */
    .dp-grid { display:grid; grid-template-columns: 84px 1fr; gap: 6px 8px; align-items:center; }
    .dp-time { font-weight: 600; color: var(--dp-time-color); font-size: .85rem; }
    .dp-slot { padding: 6px 8px; border-radius: 8px; border: 1px solid var(--bs-border-color); background: var(--dp-card-bg); }
    .dp-slot.empty { background: var(--dp-slot-empty-bg); }
    .dp-slot.filled { background: var(--dp-slot-filled-bg); border-color: var(--dp-slot-filled-border); }
    /* Important highlight */
    .dp-slot.important { background: #fff5e6; border-color: #ffcc80; }
    .theme-dark .dp-slot.important { background: #2a1f10; border-color: #5a3b14; }

    /* Important toggle button */
    .btn-important {
      --btn-bg: #ff9800;
      --btn-border: #ff9800;
      --btn-color: #1b1b1b;
      background-color: var(--btn-bg);
      border-color: var(--btn-border);
      color: var(--btn-color);
      line-height: 1;
      padding-left: .45rem; padding-right: .45rem;
    }
    .btn-important:hover { background-color: #fb8c00; border-color: #fb8c00; color: #111; }
    .btn-important[aria-pressed="true"] { background-color: #ef6c00; border-color: #ef6c00; color: white; }

    /* Extra separation before even-hour rows (e.g., 10:00, 12:00, 14:00, ...) */
    .dp-time.dp-row-even-start { margin-top: 6px; }
    .dp-time.dp-row-even-start + .dp-slot { margin-top: 6px; }

    /* Block form */
    .dp-actions { display:grid; grid-template-columns: 1fr auto auto; gap: 6px; align-items:center; }
    .dp-actions input[name="text"] { font-size: .9rem; padding: .375rem .5rem; background: var(--dp-card-bg); color: var(--bs-body-color); border-color: var(--bs-border-color); }
    .dp-actions .btn, .dp-toolbar .btn, .dp-todos .btn { --bs-btn-padding-y: .22rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .8rem; }

    /* Todo */
    .dp-todos .todo-item { display:flex; align-items:center; justify-content:space-between; gap:8px; padding:6px 8px; border:1px solid var(--bs-border-color); border-radius: 8px; background: var(--dp-card-bg); }
    .dp-todos .todo-pick { cursor:pointer; word-break: break-word; }
    .dp-muted { color: var(--dp-muted); font-size: .8rem; }

    /* Note textarea */
    textarea.dp-note { background: var(--dp-card-bg); color: var(--bs-body-color); border-color: var(--bs-border-color); overflow:hidden; resize:none; }

    /* Toolbar */
    .dp-toolbar { display:flex; gap:8px; align-items:center; flex-wrap: wrap; }

    /* Focus */
    .dp-slot:focus-within { outline: 2px solid var(--dp-focus); outline-offset: 1px; }

    /* Sticky aside (Todos/Goals) */
    @media (min-width: 901px){
      .dp-cols > aside {
        position: sticky;
        top: 8px;
        align-self: start;
        max-height: calc(100vh - 24px); /* keep within viewport */
        overflow: auto;
      }
    }
  </style>
</head>
<body class="{{ 'theme-dark' if is_dark else 'theme-light' }}">
  <header class="border-bottom" style="background: transparent;">
    <nav class="dp-container d-flex align-items-center justify-content-start gap-3" aria-label="Main navigation" style="padding-top:8px; padding-bottom:8px;">
      <a href="{{ url_for('index') }}" class="text-decoration-none fw-semibold">Dayplanner</a>
      <a href="{{ url_for('qna_page') }}" class="text-decoration-none">Q&amp;A</a>
      <a href="{{ url_for('tools_page') }}" class="text-decoration-none">Tools</a>
      <a href="{{ url_for('subscriptions_page') }}" class="text-decoration-none">Subscriptions</a>
      <a href="{{ url_for('topics_page') }}" class="text-decoration-none">Topics</a>
      <a href="{{ url_for('wordcount_page') }}" class="text-decoration-none">WordCount</a>
    </nav>
  </header>
  <main class="dp-container">
    {% block content %}{% endblock %}
  </main>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
